{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { API_BASE_URL } from '../constants';\nimport { useLatestAPI } from './useLatestAPI';\nexport function useFeaturedBanners() {\n  _s();\n\n  const {\n    ref: apiRef,\n    isLoading: isApiMetadataLoading\n  } = useLatestAPI();\n  const [featuredBanners, setFeaturedBanners] = useState(() => ({\n    data: {},\n    isLoading: true\n  }));\n  useEffect(() => {\n    if (!apiRef || isApiMetadataLoading) {\n      return () => {};\n    }\n\n    const controller = new AbortController();\n\n    async function getFeaturedBanners() {\n      try {\n        setFeaturedBanners({\n          data: {},\n          isLoading: true\n        });\n        const response = await fetch(`${API_BASE_URL}/documents/search?ref=${apiRef}&q=${encodeURIComponent('[[at(document.type, \"banner\")]]')}&lang=en-us&pageSize=5`, {\n          signal: controller.signal\n        });\n        const data = await response.json();\n        setFeaturedBanners({\n          data,\n          isLoading: false\n        });\n      } catch (err) {\n        setFeaturedBanners({\n          data: {},\n          isLoading: false\n        });\n        console.error(err);\n      }\n    }\n\n    getFeaturedBanners();\n    return () => {\n      controller.abort();\n    };\n  }, [apiRef, isApiMetadataLoading]);\n  return featuredBanners;\n}\n\n_s(useFeaturedBanners, \"VxVpY8lz3dllGcL/UOuPX8xjTtk=\", false, function () {\n  return [useLatestAPI];\n});","map":{"version":3,"names":["useState","useEffect","API_BASE_URL","useLatestAPI","useFeaturedBanners","ref","apiRef","isLoading","isApiMetadataLoading","featuredBanners","setFeaturedBanners","data","controller","AbortController","getFeaturedBanners","response","fetch","encodeURIComponent","signal","json","err","console","error","abort"],"sources":["/Users/anthonypc/Documents/GitHub/ondemand-react-bootcamp/src/utils/hooks/useFeaturedBanners.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { API_BASE_URL } from '../constants';\nimport { useLatestAPI } from './useLatestAPI';\n\nexport function useFeaturedBanners() {\n  const { ref: apiRef, isLoading: isApiMetadataLoading } = useLatestAPI();\n  const [featuredBanners, setFeaturedBanners] = useState(() => ({\n    data: {},\n    isLoading: true,\n  }));\n\n  useEffect(() => {\n    if (!apiRef || isApiMetadataLoading) {\n      return () => {};\n    }\n\n    const controller = new AbortController();\n\n    async function getFeaturedBanners() {\n      try {\n        setFeaturedBanners({ data: {}, isLoading: true });\n\n        const response = await fetch(\n          `${API_BASE_URL}/documents/search?ref=${apiRef}&q=${encodeURIComponent(\n            '[[at(document.type, \"banner\")]]'\n          )}&lang=en-us&pageSize=5`,\n          {\n            signal: controller.signal,\n          }\n        );\n        const data = await response.json();\n\n        setFeaturedBanners({ data, isLoading: false });\n      } catch (err) {\n        setFeaturedBanners({ data: {}, isLoading: false });\n        console.error(err);\n      }\n    }\n\n    getFeaturedBanners();\n\n    return () => {\n      controller.abort();\n    };\n  }, [apiRef, isApiMetadataLoading]);\n\n  return featuredBanners;\n}\n"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,YAAT,QAA6B,cAA7B;AACA,SAASC,YAAT,QAA6B,gBAA7B;AAEA,OAAO,SAASC,kBAAT,GAA8B;EAAA;;EACnC,MAAM;IAAEC,GAAG,EAAEC,MAAP;IAAeC,SAAS,EAAEC;EAA1B,IAAmDL,YAAY,EAArE;EACA,MAAM,CAACM,eAAD,EAAkBC,kBAAlB,IAAwCV,QAAQ,CAAC,OAAO;IAC5DW,IAAI,EAAE,EADsD;IAE5DJ,SAAS,EAAE;EAFiD,CAAP,CAAD,CAAtD;EAKAN,SAAS,CAAC,MAAM;IACd,IAAI,CAACK,MAAD,IAAWE,oBAAf,EAAqC;MACnC,OAAO,MAAM,CAAE,CAAf;IACD;;IAED,MAAMI,UAAU,GAAG,IAAIC,eAAJ,EAAnB;;IAEA,eAAeC,kBAAf,GAAoC;MAClC,IAAI;QACFJ,kBAAkB,CAAC;UAAEC,IAAI,EAAE,EAAR;UAAYJ,SAAS,EAAE;QAAvB,CAAD,CAAlB;QAEA,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CACzB,GAAEd,YAAa,yBAAwBI,MAAO,MAAKW,kBAAkB,CACpE,iCADoE,CAEpE,wBAHwB,EAI1B;UACEC,MAAM,EAAEN,UAAU,CAACM;QADrB,CAJ0B,CAA5B;QAQA,MAAMP,IAAI,GAAG,MAAMI,QAAQ,CAACI,IAAT,EAAnB;QAEAT,kBAAkB,CAAC;UAAEC,IAAF;UAAQJ,SAAS,EAAE;QAAnB,CAAD,CAAlB;MACD,CAdD,CAcE,OAAOa,GAAP,EAAY;QACZV,kBAAkB,CAAC;UAAEC,IAAI,EAAE,EAAR;UAAYJ,SAAS,EAAE;QAAvB,CAAD,CAAlB;QACAc,OAAO,CAACC,KAAR,CAAcF,GAAd;MACD;IACF;;IAEDN,kBAAkB;IAElB,OAAO,MAAM;MACXF,UAAU,CAACW,KAAX;IACD,CAFD;EAGD,CAjCQ,EAiCN,CAACjB,MAAD,EAASE,oBAAT,CAjCM,CAAT;EAmCA,OAAOC,eAAP;AACD;;GA3CeL,kB;UAC2CD,Y"},"metadata":{},"sourceType":"module"}